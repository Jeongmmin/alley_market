<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="am.mapper.CustomerMapper">
	
<!-- 		<select id="productMainPage" resultType="am.dto.ProductDto">
			<![CDATA[
				SELECT
					product_pk, product_name, product_price, product_stock_cnt, product_store, product_detail
				FROM
					product
				ORDER BY
					product_pk DESC
			]]>
		</select>-->
		
		
		
			<!-- 210825 혜수: 메인에서 상품 리스트 보기-->
			<select id="productMainPage" resultType="am.dto.ProductDto">
		      <![CDATA[
		         SELECT
		            product_pk,
		            product_name, product_price
		         FROM
		            product
		         ORDER BY
		            product_pk DESC
		      ]]>
		   </select>


		   	<!-- 210825 혜수: 제품 상세 페이지 확인
			<select id="productDetailBoard" parameterType="int" resultType="am.dto.ProductDto">
				<![CDATA[
				SELECT
					product_pk, product_name, product_price, product_stock_cnt, product_store, product_detail
				FROM
					product
				ORDER BY
					product_pk DESC
				]]>
			</select>
		
			 210825 혜수: 장바구니 테스트용
			<select id="productCartlist" resultType="am.dto.ProductDto">
		      <![CDATA[
		         SELECT
		            product_pk, product_name, product_price
		         FROM
		            product
		         ORDER BY
		            product_pk DESC
		      ]]>
		   </select> -->
		<!-- 회원관리-->
	
			
			
		<!-- 리뷰 보기 -->
		<select id="reviewRead" parameterType="int" resultType="am.dto.ReviewDto">
			<![CDATA[
				SELECT
					review_pk, board_category_pk, review_title, review_contents, review_score,
					create_id, product_pk, order_pk,
					DATE_FORMAT(create_date, '%Y.%m.%d %H:%i') AS create_date,
					DATE_FORMAT(update_date, '%Y.%m.%d %H:%i') AS update_date
				FROM
					review
				WHERE
					product_pk = #{productPk}
				AND
					deleted_yn = 'N'
				ORDER BY
					product_pk DESC
			]]>
		</select>
		
		<!-- 문의 보기 -->
		<select id="qnaRead" parameterType="int" resultType="am.dto.QnaDto">
			<![CDATA[
				SELECT
					qna_pk, board_category_pk, qna_title, qna_contents,
					create_id, product_pk, answer_contents, answer_yn,
					DATE_FORMAT(create_date, '%Y.%m.%d %H:%i') AS create_date
				FROM
					qna
				WHERE
					product_pk = 1
				AND
					deleted_yn = 'N'
				ORDER BY
					product_pk DESC
			]]>
		</select>
		
		<!-- 문의 등록 -->
		<insert id="qnaInsert" parameterType="am.dto.QnaDto">
			<![CDATA[				
				INSERT INTO
					qna (product_pk, qna_title, qna_contents, create_id, create_date)
				VALUES
					(1, #{qnaTitle}, #{qnaContents}, #{createId}, NOW())
			]]>
		</insert>
		
	</mapper>
	
	
